<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>대시보드 - 터틀맨 타운</title>
    <link rel="stylesheet" th:href="@{/css/dashboard.css}">
</head>
<body>
    <div class="dashboard">
        <div class="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-brand">
                    <span class="sidebar-logo">🐢</span>
                    <span class="sidebar-title">터틀맨 타운</span>
                </div>
            </div>

            <div class="user-info">
                <div class="user-avatar" th:text="${#strings.substring(user.name, 0, 1)}">U</div>
                <div class="user-details">
                    <div class="user-name" th:text="${user.name}">사용자</div>
                    <span class="user-role" th:classappend="${isAdmin} ? 'admin' : ''"
                          th:text="${isAdmin} ? 'ADMIN' : 'USER'">USER</span>
                </div>
            </div>

            <div class="sidebar-menu">
                <a th:each="menu : ${menus}"
                   th:href="@{${menu.path}}"
                   class="menu-item"
                   th:classappend="${menu.path == '/dashboard'} ? 'active' : ''">
                    <span class="menu-icon" th:text="${menu.icon}">🏠</span>
                    <span class="menu-text" th:text="${menu.name}">메뉴</span>
                </a>
            </div>

            <div class="sidebar-footer">
                <div class="quote-box">
                    <div class="quote-text">
                        나는 내 영혼의 주인<br>
                        내 영혼의 선장
                    </div>
                    <div class="quote-author">- Invictus</div>
                </div>
                <form th:action="@{/logout}" method="post">
                    <button type="submit" class="logout-btn">로그아웃</button>
                </form>
            </div>
        </div>

        <div class="main-content">
            <div class="top-bar">
                <h2 class="page-title" th:text="${isAdmin} ? '관리자 대시보드' : '내 대시보드'">대시보드</h2>
                <div>⏰ <span th:text="${#temporals.format(#temporals.createNow(), 'yyyy년 MM월 dd일')}">2025년 10월 16일</span></div>
            </div>

            <!-- 관리자 통계 -->
            <div th:if="${isAdmin}" class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon">👥</div>
                    <div class="stat-label">전체 회원수</div>
                    <div class="stat-value">1,247</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">📊</div>
                    <div class="stat-label">오늘 계산 횟수</div>
                    <div class="stat-value">89</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">💼</div>
                    <div class="stat-label">활성 포트폴리오</div>
                    <div class="stat-value">456</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">🔥</div>
                    <div class="stat-label">이번 주 활동</div>
                    <div class="stat-value">2,341</div>
                </div>
            </div>

            <!-- 일반 사용자 통계 -->
            <div th:unless="${isAdmin}" class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon">📊</div>
                    <div class="stat-label">내 계산 횟수</div>
                    <div class="stat-value">42</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">💼</div>
                    <div class="stat-label">보유 종목</div>
                    <div class="stat-value">8</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">💰</div>
                    <div class="stat-label">총 투자금</div>
                    <div class="stat-value">₩5.2M</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">📈</div>
                    <div class="stat-label">평균 수익률</div>
                    <div class="stat-value">+12.5%</div>
                </div>
            </div>

            <div class="content-card">
                <h3 th:if="${isAdmin}">📋 시스템 현황</h3>
                <h3 th:unless="${isAdmin}">📋 빠른 시작</h3>

                <p th:if="${isAdmin}">관리자는 모든 메뉴에 접근할 수 있습니다.</p>
                <p th:unless="${isAdmin}">물타기 계산기를 사용하여 평균 매수 단가를 계산하세요.</p>

                <ul style="margin-top: 15px; line-height: 2;">
                    <li th:if="${isAdmin}">✅ 회원 관리 및 권한 설정</li>
                    <li th:if="${isAdmin}">✅ 메뉴 구조 관리</li>
                    <li th:if="${isAdmin}">✅ 시스템 통계 및 모니터링</li>
                    <li th:if="${isAdmin}">✅ 전체 계산 히스토리 조회</li>

                    <li th:unless="${isAdmin}">✅ 평단가 계산 및 목표 평단가 역산</li>
                    <li th:unless="${isAdmin}">✅ 개인 포트폴리오 관리</li>
                    <li th:unless="${isAdmin}">✅ 계산 히스토리 저장 및 조회</li>
                    <li th:unless="${isAdmin}">✅ 내 정보 수정</li>
                </ul>
            </div>
        </div>
    </div>
</body>
</html>
